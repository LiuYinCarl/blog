书籍 《编译原理 第二版》书摘



## 类型检查

语意分析的一个重要部分是类型检查(type checking)。编译器检查每个运算符是否具有匹配的运算分量。比如，很多程序设计语言的定义中要求一个数组的下标必须是整数。如果用一个浮点数作为数组下标，编译器就必须报告错误。



## C 语言的静态作用域策略概述如下

1. 一个 C 程序由一个顶层的变量和函数声明的序列组成。
2. 函数内部可以声明变量，变量包括局部变量和参数。每个这样的声明的作用域被限制在它们所出现的那个函数内。
3. 名字 `x` 的一个顶层声明的作用域包括其后的所有程序。但是如果一个函数中也有一个 `x` 的声明，那么函数中的那些语句就不在这个顶层声明的作用域内。



## 文法定义

一个上下文无关文法(context-free grammar) 由四个元素组成：

1. 一个终结符号集合，它们有时也称为 “词法单元”。终结符号是该文法所定义的语言的基本符号的集合。
2. 一个非终结符号集合，它们有时也被称为 “语法变量”。每个非终结符号表示一个终结符号串的集合。
3. 一个产生式集合，其中每个产生式包括一个称为产生式头或左部的非终结符号、一个箭头，和一个称为产生式体或右部的由终结符号及非终结符号组成的序列。产生式主要用来表示某个构造的某种书写形式。如果产生式头非终结符号代表一个构造，那么该产生式体就代表了该构造的一种书写方式。
4. 指定一个非终结符号为开始符号。(2.2.1)



## 多优先级运算符表达式文法的设计

我们可以将因子(factor) 理解成不能被任何运算符分开的表达式。不能分开的意思是说当在任意因子的任意一边放置一个运算符，都不会导致这个因子的任何部分分离出来，成为这个运算符的运算分量。当然，因子本身作为一个整体可以成为该运算符的一个运算分量。如果这个因子是一个由括号括起来的表达式，那么括号将起到保护其不被分开的作用。如果因子就是一个运算分量，那么它当然不能被分开。

一个（不是因子的）项（term）是一个可能被高优先级的运算符分开，但不能被低优先级运算符分开的表达式。一个（不是因子也不是项的）表达式可能被任何一个运算符分开。

我们可以把这种思想推广到具有任意 n 层优先级的情况。我们需要 n + 1 个非终结符号。通常，这个非终结符号的产生式体只能是单个运算分量或括号括起来的表达式。然后，对于每个优先级都有一个非终结符，表示能被该优先级或更高优先级的运算符分开的表达式。通常，这个非终结符的产生式有一些产生式体表示了该优先级的运算符的应用。另有一个产生式体只包含了代表更高一级优先级的非终结符号。（2.3.1）



## 语法制导翻译

语法制导翻译是通过向一个文法的产生式附加一些规则或程序片段而得到的。(2.3)

### 语法制导翻译相关的两个概念

属性：属性表示与某个程序构造相关的任意的量。属性可以是多种多样的，比如表达式的数据类型、生成的代码中的指令数量或为某个构造生成的代码中第一条指令的位置等。因为我们用文法符号（终结符号或者非终结符号）来表示程序构造，所以我们将属性的概念从程序构造拓展到表示这些构造的文法符号上。

语法制导的翻译方案：翻译方案是一种将程序片段附加到一个文法的各个产生式上的表示法。当在语法分析过程中使用一个表达式时，相应的程序片段就会执行。这些程序片段的执行效果按照语法分析过程的顺序组合起来，得到的结果就是这次分析/综合过程处理源程序得到的翻译结果。(2.3)



### 语法制导定义(syntax-directed definition)

把每个文法符号和一个属性集合相关联，并且把每个产生式和一组语义规则(semantic rule)想关联，这些规则用于计算与该产生式中符号相关联的属性值。(2.3.2)

如果某个属性在语法分析树节点 $N$ 上的值是由$N$ 的子节点以及 $N$ 本身的属性值确定的，那么这个属性就称为综合属性(synthesized attribute)。综合属性具有一个很好的性质：只需要对语法分析树进行一次自底向上的遍历，就可以计算出属性的值。(2.3.2)



## 后缀表示的归纳定义

1. 如果 $E$ 是一个常量或者变量，则 $E$ 的后缀表示是 $E$ 本身。
2. 如果 $E$ 是一个形如 $E_1\ op \ E_2$ 的表达式，其中 $op$ 是一个二目运算符，那么 $E$ 的后缀表达式是 $E_{1}^{’} \ E_{2}^{'} \ op$，这里 $E_{1}^{‘}$ 和 $E_{2}^{'}$ 分别是 $E_{1}$ 和 $E_{2}$ 的后缀表示。
3. 如果 $E$ 是一个形如 ($E_{1}$) 的被括号括起来的表达式，则 $E$ 的后缀表示就是 $E_{1}$ 的后置表示。(2.3.1)























































